<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../style.css">
    <title>Qaisar-Tech-Blog</title>
</head>

<body>
    <header>
        <a href="#" class="logo"> My Tech Blog</a>
        <div class="menuToggle"></div>
    </header>
    <ul class="navigation">
        <li><a href="/index.html#about" onclick="toggleMenu()">About</a></li>
        <li><a href="/index.html#home"" onclick="toggleMenu()">Home</a></li>
        <li><a href="/index.html#post"onclick="toggleMenu()">Post</a></li>
        <li><a href="#contact"onclick="toggleMenu()">Contact</a></li>

    </ul>
    <!-- Banner -->
    <section class="banner" id="home">
        <img src="../react.jpg" alt=" home-banner" class="cover">
        <div class="contentBx">
            <h2>React for Beginners</h2>
        <h4>Part 3: How to setup a webapi and sqlserver in React</h4>
          
        </div>
    </section>
    <!-- About -->
    <div class="blog">
        <div class="contentBlogBx">
            
    <p>
    <h2>

        How to do this Project from scratch:
    </h2>

<h3>

    1. Setting up the DB
</h3>
<p>

    If you don't have a docker SQL Server set up, run this cmd.
    (You need a docker.compose.yml)
</p>
<code class="code">

    docker-compose up -d
</code>
<br>


<h4>

    Connecting in Azure Data Studio:
</h4>
--> New Connection, then type:
<br>
<code class="code">

    Connection Type: 
    Microsoft SQL Server
    Server = localhost, 1433
    Auth type = SQL login
    user = sa
    Password = Password_2_Change_4_Real_Cases_&

    rest things :) = Default
</code>

<h3>

    2. Create Web Api
</h3>
<h4>

    2.1 Create WebAPI Project
</h4>
/// Make sure you have dotnet version 6!!!!!!
<code class="code">

    dotnet new globaljson --sdk-version 6.0.101
</code>
<br>
<code class="code">

    dotnet new webapi -o simpleAPI
</code>
<br>
* SimpleAPI will be the webapi Project Name!
<br>
<code class="code">

    cd simpleAPI
</code>

<h4>

    2.2 Add Entity Framework
</h4>

<code class="code">

    dotnet add package Microsoft.EntityFrameworkCore.Design
    dotnet add package Microsoft.VisualStudio.Web.CodeGeneration.Design
    dotnet add package Microsoft.EntityFrameworkCore.SqlServer
</code>

<p>

    Check if this packages were added in the csproj file.
    if not, add them manually, and run dotnet restore.
</p>

<h4>
    2.3 Create Context (Manually)
</h4>
<p>

    You can copy the content from simpleAPI/Data/SimpleContext.cs for it!
    *OR*
    Create a directory called 'Data' inside simpleAPI 
    and create a file called SimpleContext.cs
    
    Remember to set up the right connection string in the app.settings
    
    Make the Context consistent by adding it as a dbContext in the program.cs file
    Seed data in the program.cs file
</p>
### Simple in the SimpleContext will be the database name

<h4>
    2.4 Create Tables
</h4>
<p>

    In the Context, create a table by Creating a DbSet and passing a model.
    The Property name will be the table name.
    <br>
    Create a model that you're going to use in the db
    <br>
    Create a table in the Simple Context.
</p>

     Now you have to migrate!
    Run this command everytime you change somethingn on the context or in a model!!!!!
    ```bash
    dotnet ef migrations add {Name}
    ```
      ```bash
    dotnet ef database update
    ```


<h4>
    2.5 Create Controller:
</h4> 
   <p>
       
       We need a Context in the controller.
       In order to access the db.
    </p> 


<h3>

    3. Create React APP
</h3>
   <code class="code">
       
       npx create-react-app simpleclient <br>
    </code>
   <p>
       
       You need to add a CORS policy in the backend to connect:
    </p>
    <code class="code">
        app.UseCors(opt => 
          opt.SetIsOriginAllowed(origin => true));
    </code>
  <br>
On react, you can fetch normally
    </p>
    
            <p>
    And that's it!
    
    I hope this has been a helpful introduction to create an API and a React App. If you have questions, feel free to comment down below.
</p>
</p>
        </div>
      
      
    </div>
    
        <div class="contentBx">
            <div class="contant">
               
    <!--            

If youâ€™d like to know more, follow me on Twitter, LinkedIn, or Instagram!


 -->
            </div>
            
        </div>

    </section>

  
    <!-- Contact -->
    
    <!-- Contact -->
    
    <section class="contact" id="contact">
        <div class="title">
            <h2>Get in Touch</h2>
            <p>You can contact me if you have any question :)</p>

        </div>

        <div class="contactForm">
        <form action="https://formsubmit.co/2da4c9399ec3974610ed39691427c45e" method="POST">
                 <!-- Honeypot -->
          <input type="text" name="_honey" class="honeypot">
            <!-- Disable Captcha -->
          <input type="hidden" name="_captcha" value="false">
          <input type="hidden" name="_next" value="https://qaisarm.github.io/mytechblog/blogs/thankyou.html">
          <div class="row">
            <input type="text" name="First&nbsp;Name" placeholder="First&nbsp;Name" required>
            <input type="text" name="Last&nbsp;Name" placeholder="Last&nbsp;Name" required>
                        </div>
                        <div class="row">
                            <input type="text" name="Email" placeholder="Email" required>
                            <input type="text" name="Mobile" placeholder="mobile&nbsp;No.">
                                        </div>
                                        <div class="row2">
                                            <textarea name="Comments&nbsp;and&nbsp;Questions" id="" placeholder="Message"></textarea>
                                          
                                                        </div>
            
              <div class="row2"> <button type="submit" class="btn">Send</button>
                            </div>
           
       </form>
        </div>
        
    </section>
    
    <!-- Footer-->
   <!-- Footer-->
   <footer>
    <a href="#" class="logo"> My Tech Blog</a>
    <ul class="footerMenu">
        <li><a href="#home">Home</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#post">Post</a></li>
        <li><a href="#contact">Contact</a></li>
    </ul>
    <p class="copyrightText"> Copyright &#169; 2022 Qaisar's Tech Blog. All Right Reserved</p>
</footer>
    <script>

        const menuToggle = document.querySelector('.menuToggle');
        const navigation = document.querySelector('.navigation');
        menuToggle.onclick = function () {
            menuToggle.classList.toggle('active');
            navigation.classList.toggle('active');
        }
        window.addEventListener('scroll', function () {
            const header = document.querySelector('header');
            header.classList.toggle('sticky', window.scrollY > 0)
        })
        function toggleMenu()
        {
            menuToggle.classList.remove('active');
            navigation.classList.remove('active')
        }
    </script>
</body>

</html>



